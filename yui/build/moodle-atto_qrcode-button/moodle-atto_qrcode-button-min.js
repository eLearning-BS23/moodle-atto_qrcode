YUI.add("moodle-atto_qrcode-button",function(a,e){var t="atto_qrcode",r='<form class="mform atto_form atto_qrcode" id="atto_qrcode_form"><label for="qrcodecontent">'+M.str.atto_qrcode.qrcodecontent+'</label><input class="form-control fullwidth " type="text" id="qrcodecontent"required="true" value="{{qrcodecontent}}"/><label for="qrcode_size">'+M.str.atto_qrcode.qrcode_size+'</label><input class="form-control fullwidth " type="number" id="qrcode_size"required="true" size="10" value="300" min="5" max="100000"/><label for="qrcode_margin">'+M.str.atto_qrcode.qrcode_margin+'</label><input class="form-control fullwidth " type="number" id="qrcode_margin"size="10" value="10" min="5" max="100" required="true" value="{{qrcode_margin}}"/><div class="clearfix"></div><div class="mdl-align"><br><button class="btn btn-secondary submit" type="submit">'+M.str.atto_qrcode.insertqrcode+"</button></div></form>";a.use("core/event").namespace("M.atto_qrcode").Button=a.Base.create("button",a.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){this.get("disabled")||this.addButton({icon:"qrcode",iconComponent:t,callback:this._handleQrCodeGenerator,callbackArgs:"qrcode"})},_handleQrCodeGenerator:function(){this._getQrCode(),this.getDialogue({headerContent:M.util.get_string("insertqrcode",t),focusAfterHide:!0,width:660}).set("bodyContent",this._getDialogueContent(this.get("host").getSelection())).show()},_getQrCode:function(){a.io(M.cfg.wwwroot+"/lib/editor/atto/plugins/qrcode/ajax.php",{context:this,data:{sesskey:M.cfg.sesskey,contextid:this.get("contextid")},timeout:500,on:{complete:this._handaleQrCodeAjaxCall}})},_handaleQrCodeNetworkCall:function(e,t){console.log(t)},_getDialogueContent:function(e){var t={qrcode_margin:this.get("qrcode_margin"),brightcoveAccount:this.get("brightcoveAccount")},o=a.Node.create(a.Handlebars.compile(r)(t));return this._attachEvents(o,e)},_attachEvents:function(e,c){return e.one(".submit").on("click",function(e){var t,o,r=e.currentTarget.ancestor(".atto_form"),i=r.one("#qrcodecontent").get("value"),n=r.one("#qrcode_size").get("value"),a=r.one("#qrcode_margin").get("value");i&&n&&a&&(e.preventDefault(),t=this._getMediaHTMLBrightcove(e.currentTarget.ancestor(".atto_form")),o=this.get("host"),this.getDialogue({focusAfterHide:null}).hide(),t&&(o.setSelection(c),o.insertContentAtFocusPoint(t),this.markUpdated()))},this),e},_getMediaHTMLBrightcove:function(e){var t=e.one("#brightcove_width_unit").get("value")||"px",o=e.one("#brightcove_width").get("value")+t,r=e.one("#brightcove_height").get("value")+t,i=document.querySelector('input[name="brightcove_sizing"]:checked').value,n={accountId:"12313",videoId:"12313",playerId:"12313",display_video:"block",display_thumb:"none"};return"res"===i?n.brightcoveResWidth=o:(n.brightcoveWidth=o,n.brightcoveHeight=r),n.videoId?a.Handlebars.compile("")(n):""}},{ATTRS:{disabled:{value:!1},contextid:{value:null}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});